package apitest;

import org.testng.annotations.Test;
import org.junit.Assert;

import io.restassured.RestAssured;
import io.restassured.path.json.JsonPath;
import io.restassured.http.Method;
import io.restassured.response.Response;
import io.restassured.specification.RequestScpecification;

pubcli class APITest {

     public static void main(String[] args){
     
             //Store the URL value in a String baseUrl
             String baseUrl = "https://api.tmsandbox.co.nz/v1/Categories/6327/Details.json?catalogue=false";;
     
              //Assign base URL value to the RESTful webservice
              RestAssured.baseURI = baseUrl;
              
              // Get the RequestSpecification of the request that you want to sent to the server.The server is specified by the BaseURI in the above step
              RequestSpecification Request = RestAssured.given();
              
              //Issue a request to the server by specifying the method Type and the method URL.
              // This returns the Response from the server.Store the reponse in a variable.
              Response response = Request.get();
              
              //Verify if the Status Code is 200
              Assert.assertequals(200,response.getStatusCode());
              
              // Get the Json Path Object Instance from the Response Interface
              JsonPath jsonPathEvaluator = response.jsonpath();
              
              
              //Query the JsonPath Object to get a string value of the node specified by JsonPath:Name
              String Name =jsonPathEvaluator.get("Name");
              
              //Print the Name to see what we got
              System.out.println("Name recieved from reponse is " + Name);
              
              //Validate the 1st Accpetance Criteria -Name should be equal to Carbon credits
              Assert.assertequals(Name, "Carbon credits", " 1st Acceptance Criteria fullfilled -Correct Name recieved in the response"); 
              
      }        
              
              
              
